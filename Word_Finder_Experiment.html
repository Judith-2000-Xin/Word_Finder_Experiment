<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Touch Word Finder</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100vh;
      font-family: "Times New Roman", serif;
      font-size: 1.2vw;
      line-height: 1.5;
      text-align: justify;
      background: #f4f4f4;
      overflow: hidden;
      box-sizing: border-box;
    }
    body {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 2vw;
    }
    .hidden { display: none; }
    .word-box {
      font-size: 2vw;
      margin: 1vw;
      text-align: center;
    }
    .line {
      margin: 0.5vw 0;
      font-family: monospace;
      text-align: justify;
      white-space: pre-wrap;
      width: 100%;
    }
    .word-span {
      display: inline-block;
      cursor: pointer;
      padding: 0.2vw 0.4vw;
      border-radius: 0.4vw;
    }
    .word-span:hover { background-color: #dfe6e9; }
    .correct { background-color: #55efc4; }
    .wrong { background-color: #fab1a0; }
    .countdown {
      font-size: 2.4vw;
      margin: 2vw;
      text-align: center;
    }
    .resting {
      font-size: 2.8vw;
      text-align: center;
      margin-top: 5vw;
    }
  </style>
</head>
<body>
  <div class="word-box" id="wordBox"></div>
  <div id="textContainer"></div>
  <div class="countdown" id="timer"></div>

  <script>
    const wordBox = document.getElementById('wordBox');
    const textContainer = document.getElementById('textContainer');
    const timer = document.getElementById('timer');

    const pages = [
      ['COLOR', 'TREE', 'DOOR'],
      ['APPLE', 'MAP'],
      ['SUN', 'CODE', 'CAR'],
      ['BOOK', 'FISH'],
      ['WIND', 'DOG', 'CAT'],
      ['SKY', 'MOON'],
      ['TASK', 'TOP'],
      ['YES', 'NO'],
      ['WIN', 'LOSE'],
      ['GO', 'STOP'],
      ['FIRE'],
      ['JUMP'],
      ['RED', 'BLUE'],
      ['COAT', 'COOL'],
      ['DATA'],
      ['MAPLE', 'RING'],
      ['LAMP'],
      ['WALL'],
      ['COLD'],
      ['HILL']
    ];

    let currentPage = 0;
    let countdown = 60;
    let foundWords = [];

    function shuffleText(words) {
      const lines = [];
      for (let i = 0; i < 20; i++) {
        let line = '';
        while (line.length < 50) {
          const char = Math.random() < 0.15 ? ' ' : String.fromCharCode(65 + Math.floor(Math.random() * 26));
          line += char;
        }
        lines.push(line);
      }

      words.forEach(word => {
        let inserted = false;
        while (!inserted) {
          const row = Math.floor(Math.random() * lines.length);
          const col = Math.floor(Math.random() * (50 - word.length));
          if (lines[row].substr(col, word.length).trim() === '') {
            lines[row] = lines[row].substring(0, col) + word + lines[row].substring(col + word.length);
            inserted = true;
          }
        }
      });
      return lines;
    }

    function displayPage(index) {
      textContainer.innerHTML = '';
      wordBox.textContent = `Find: ${pages[index].join(', ')}`;
      foundWords = [];
      const lines = shuffleText(pages[index]);
      lines.forEach(line => {
        const div = document.createElement('div');
        div.className = 'line';
        for (let ch of line) {
          const span = document.createElement('span');
          span.className = 'word-span';
          span.textContent = ch;
          span.addEventListener('click', () => toggleSelection(span));
          div.appendChild(span);
        }
        textContainer.appendChild(div);
      });
      startTimer();
    }

    function toggleSelection(span) {
      span.classList.toggle('correct');
    }

    function startTimer() {
      countdown = 60;
      timer.textContent = `Time Left: ${countdown}`;
      const interval = setInterval(() => {
        countdown--;
        timer.textContent = `Time Left: ${countdown}`;
        if (countdown <= 0) {
          clearInterval(interval);
          nextPage();
        }
      }, 1000);
    }

    function nextPage() {
      currentPage++;
      if (currentPage >= pages.length) {
        textContainer.innerHTML = '<div class="resting">✅ Game Over! Thank you!</div>';
        wordBox.textContent = '';
        timer.textContent = '';
      } else if (currentPage % 5 === 0) {
        textContainer.innerHTML = '<div class="resting">⏳ Resting 60 seconds...</div>';
        timer.textContent = '';
        setTimeout(() => displayPage(currentPage), 60000);
      } else {
        textContainer.innerHTML = '<div class="resting">⏳ Resting 30 seconds...</div>';
        timer.textContent = '';
        setTimeout(() => displayPage(currentPage), 30000);
      }
    }

    displayPage(currentPage);
  </script>
</body>
</html>
